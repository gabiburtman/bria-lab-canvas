@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Google+Sans:wght@400;500;700&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Bria 4 Lab Design System - Minimalist Dark Mode Interface */

@layer base {
  :root {
    /* Bria Lab Dark Mode Colors */
    --lab-primary: 261 81% 71%; /* #8B5CF6 - Vibrant purple for primary actions */
    --lab-primary-hover: 261 81% 65%; /* Darker purple for hover states */
    --lab-primary-foreground: 0 0% 100%; /* White text on purple */
    --lab-primary-glow: 261 81% 71%; /* Purple glow for focus states */
    
    /* Dark Mode Background System */
    --lab-background: 216 4% 23%; /* #38393d - Dark gray background */
    --lab-surface: 216 13% 15%; /* #21252b - Darker gray for panels and cards */
    --lab-surface-elevated: 216 13% 17%; /* Slightly lighter for elevated surfaces */
    
    /* Dark Mode Text Hierarchy */
    --lab-text-primary: 217 33% 97%; /* #F3F4F6 - Light off-white for high readability */
    --lab-text-secondary: 220 14% 66%; /* #9CA3AF - Lighter grey for labels and secondary text */
    --lab-text-muted: 220 14% 56%; /* Slightly darker grey for muted text */
    
    /* Dark Mode Border System */
    --lab-border: 217 19% 27%; /* #374151 - Subtle grey borders */
    --lab-border-focus: 261 81% 71%; /* Purple focus states */
    --lab-border-hover: 217 19% 32%; /* Lighter grey for hover states */
    
    /* Status Colors (Dark Mode Adjusted) */
    --lab-success: 142 76% 46%; /* Brighter green for dark backgrounds */
    --lab-warning: 38 92% 60%; /* Brighter orange for dark backgrounds */
    --lab-error: 0 84% 70%; /* Brighter red for dark backgrounds */
    
    /* Dark Mode Interactive States */
    --lab-interactive-hover: 217 19% 24%; /* Subtle dark hover background */
    --lab-active: 217 19% 21%; /* Slightly darker active state */
    --lab-disabled: 217 19% 20%; /* Disabled background */
    --lab-accent: 261 81% 71%; /* Purple accent for interactive elements */
    
    /* Minimal Elevation (No Heavy Shadows) */
    --lab-glow-subtle: 0 0 0 1px hsl(var(--lab-border-hover));
    --lab-glow-focus: 0 0 0 2px hsl(var(--lab-primary-glow) / 0.3);
    --lab-glow-primary: 0 0 16px hsl(var(--lab-primary) / 0.2);
    
    /* Layout & Spacing (8px grid, 6px radius) */
    --lab-radius: 0.375rem; /* 6px sharp modern radius */
    --lab-radius-sm: 0.25rem; /* 4px for smaller elements */
    --lab-radius-lg: 0.5rem; /* 8px for larger cards */
    
    /* JSON Editor Dark Theme */
    --lab-code-bg: 220 43% 12%; /* Darker than main background */
    --lab-code-text: 217 33% 95%; /* Light text */
    --lab-code-highlight: 261 81% 76%; /* Brighter purple highlights */
    --lab-code-line: 217 19% 15%; /* Line number background */
    --lab-code-border: 217 19% 20%; /* Code editor border */
    
    /* Animation Timing */
    --lab-transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --lab-transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Apply Dark Mode theme to shadcn variables */
    --background: var(--lab-background);
    --foreground: var(--lab-text-primary);
    --card: var(--lab-surface);
    --card-foreground: var(--lab-text-primary);
    --popover: var(--lab-surface);
    --popover-foreground: var(--lab-text-primary);
    --primary: var(--lab-primary);
    --primary-foreground: var(--lab-primary-foreground);
    --secondary: var(--lab-hover);
    --secondary-foreground: var(--lab-text-primary);
    --muted: var(--lab-hover);
    --muted-foreground: var(--lab-text-secondary);
    --accent: var(--lab-active);
    --accent-foreground: var(--lab-text-primary);
    --destructive: var(--lab-error);
    --destructive-foreground: var(--lab-text-primary);
    --border: var(--lab-border);
    --input: var(--lab-border);
    --ring: var(--lab-border-focus);
    --radius: var(--lab-radius);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-roboto;
  }

  /* Enhanced update indicators */
  .field-updated-recent {
    @apply relative bg-blue-500/15 border border-blue-500/40 rounded-md;
    animation: field-pulse 2s ease-in-out;
    box-shadow: 0 0 0 1px hsl(var(--lab-primary) / 0.3), 0 0 8px hsl(var(--lab-primary) / 0.2);
  }

  .field-updated-recent::before {
    content: '';
    @apply absolute -inset-0.5 bg-gradient-to-r from-blue-500/20 to-blue-400/20 rounded-md -z-10;
    animation: glow-pulse 2s ease-in-out infinite;
  }

  .field-updated-previous {
    @apply bg-amber-500/10 border border-amber-500/25 rounded-md;
    transition: all 0.3s ease-out;
  }

  .field-updated-child {
    @apply bg-green-500/8 border-l-2 border-green-500/30;
  }

  .update-badge {
    @apply inline-flex items-center gap-1 px-1.5 py-0.5 text-xs bg-blue-500/20 text-blue-300 rounded border border-blue-500/30 font-mono;
    animation: badge-appear 0.3s ease-out;
  }

  .update-count {
    @apply inline-flex items-center justify-center w-5 h-5 text-xs bg-blue-500/30 text-blue-200 rounded-full border border-blue-500/40;
    animation: count-bounce 0.4s ease-out;
  }

  @keyframes field-pulse {
    0% { 
      box-shadow: 0 0 0 0 hsl(var(--lab-primary) / 0.4);
      transform: scale(1);
    }
    50% { 
      box-shadow: 0 0 0 4px hsl(var(--lab-primary) / 0.2);
      transform: scale(1.002);
    }
    100% { 
      box-shadow: 0 0 0 0 hsl(var(--lab-primary) / 0);
      transform: scale(1);
    }
  }

  @keyframes glow-pulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 0.8; }
  }

  @keyframes badge-appear {
    0% { 
      opacity: 0; 
      transform: translateY(-4px) scale(0.9); 
    }
    100% { 
      opacity: 1; 
      transform: translateY(0) scale(1); 
    }
  }

  @keyframes count-bounce {
    0% { 
      transform: scale(0.8); 
      opacity: 0; 
    }
    50% { 
      transform: scale(1.1); 
      opacity: 1; 
    }
    100% { 
      transform: scale(1); 
      opacity: 1; 
    }
  }

  .clear-updates-btn {
    @apply inline-flex items-center gap-2 px-3 py-1.5 text-xs bg-amber-500/10 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded-md border border-amber-500/30 hover:border-amber-500/40 transition-all duration-200;
  }

  .update-tooltip {
    @apply bg-lab-surface text-lab-text-primary px-2 py-1 text-xs rounded-md border border-lab-border shadow-lg;
  }
}
}

/* JSON Editor Syntax Highlighting */
.text-lab-code-key {
  color: hsl(201 96% 80%); /* Light blue for keys */
}

.text-lab-code-string {
  color: hsl(25 83% 63%); /* Orange for strings */
}

.text-lab-code-number {
  color: hsl(113 25% 71%); /* Light green for numbers */
}

.text-lab-code-boolean {
  color: hsl(207 82% 66%); /* Blue for booleans */
}

.text-lab-code-null {
  color: hsl(0 0% 50%); /* Gray for null */
}

/* Custom scrollbar for JSON editor */
.scrollbar-thin {
  scrollbar-width: thin;
}

.scrollbar-track-lab-code-bg::-webkit-scrollbar {
  width: 8px;
}

.scrollbar-track-lab-code-bg::-webkit-scrollbar-track {
  background: hsl(var(--lab-code-bg));
}

.scrollbar-thumb-lab-text-muted\/20::-webkit-scrollbar-thumb {
  background: hsl(var(--lab-text-muted) / 0.2);
  border-radius: 4px;
}

.scrollbar-thumb-lab-text-muted\/20::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--lab-text-muted) / 0.3);
}
